#{extends 'site.html' /} 
#{set title:'Question' /}

<h2>Question ${question.title}</h2>


<p>
	<label for="title">Title: </label> <input type="text" name="title"
		id="question_title" value="${question.title}" readonly="readonly" />
</p>
<p>
	<label for="difficulty">Difficulty: </label> <input type="text"
		name="difficulty" id="difficulty" value="${question.difficulty}"
		readonly="readonly" />
</p>
<p>
	<label for="second">Time: </label> <input type="text" name="second"
		id="second" value="${question.second}" readonly="readonly" />(seconds)
</p>
<p>
	<label for="groupType">Type: </label> #{select 'groupTypes',
	items:models.GroupType.findAll(), valueProperty:'id',
	labelProperty:'name', id:'group_types', value:question.groupType.id /}
</p>
<p>
	<label for="content">Content: </label>
	<textarea name="content" cols="80" rows="10" readonly="readonly">${question.content}</textarea>
</p>
<p>
	<label for="explanation">Explanation: </label>
	<textarea name="explanation" cols="80" rows="10" readonly="readonly">${question.explanation}</textarea>
</p>
<p>
	<label for="questionType">Response: </label>
	<input type="radio"	name="questionType"	value="${models.Question.QuestionType.SIMPLE_CHOICE }" #{if question.questionType == models.Question.QuestionType.SIMPLE_CHOICE} checked="checked" #{/if}/>Simple choice
	<input type="radio" name="questionType" value="${models.Question.QuestionType.MULTIPLE_CHOICE }" #{if question.questionType == models.Question.QuestionType.MULTIPLE_CHOICE}checked="checked" #{/if}/>Multiple choice
	<input type="radio" name="questionType"	value="${models.Question.QuestionType.TEXT_ANSWER }" #{if question.questionType == models.Question.QuestionType.TEXT_ANSWER}checked="checked" #{/if}/>Full text
</p>

<div id="response_bloc">
	<table>
		<thead>
			<tr>
				<th>Correct</th>
				<th>Responses</th>
			</tr>
		</thead>
		<tbody>
		#{list items:0..4, as:'i'}
    		<tr>
				<td>
					<input type="radio" name="correct" value="${i+1}" />
					<input type="checkbox" name="correct${i+1}" #{if question.responses.size()>i && question.responses.get(i).correct}checked="checked"#{/if}/>
				</td>
				<td>
					<input type="text" name="response1" value="#{if question.responses.size()>i}${question.responses.get(i).value}#{/if}" />
				</td>
			</tr>
		#{/list}
		</tbody>
	</table>

</div>

<p>
	<input type="submit" value="Save" />
</p>

<script type="text/javascript">
		$(document).ready(function() {
			$('input[name="questionType"]').change(function(){
				loadChoice();
			});
			loadChoice();
		});
		
		function loadChoice(){
			var choice = $('input[name="questionType"]:checked').val();
			if(choice == '${models.Question.QuestionType.SIMPLE_CHOICE }'){
				$('div#response_bloc input[type=radio]').show();
				$('div#response_bloc input[type=checkbox]').hide();
			}else if(choice == '${models.Question.QuestionType.MULTIPLE_CHOICE }'){
				$('div#response_bloc input[type=radio]').hide();
				$('div#response_bloc input[type=checkbox]').show();
			}else {
				$('div#response_bloc input[type=radio]').hide();
				$('div#response_bloc input[type=checkbox]').hide();
			}
		}
		</script>









